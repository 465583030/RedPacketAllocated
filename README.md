# 微信红包分配算法
在微信群里面发红包，每个人能拿到多少钱呢？这个数额是怎样算出来的呢？这个算法告诉你！

## 初始化红包
在微信抢过红包的细心朋友都会发现，每个红包的金额即使再小，它也不可能为0元。每个红包最小也是1分钱。所以在红包分配算法做初始化的时候，需要保证每个红包都不能出现0元。
<br>
在这样的前提下，我们会先做判断，若不能保证每个红包至少一分钱，如4分钱分给5个人，系统就会报错。
<br>
随后，我们先给每个红包分配一分钱，如1元分给20个人，系统就会先拿出2角，分给这些用户每人1分钱，剩下的8角再进行后续的分配。这样，就保证了每个红包至少1分钱的入账。

## 生成随机数
我们以1元分给20个人为例，来说明微信红包分配算法。
<br>
上一步我们介绍了，先给每个人分配1分钱，接下来再分配剩下的8角。8角等于80分钱，因此系统先随机生成20个0到80的随机数（randNum数组），再对随机数求和（randSum）。
<br>
然后，每个随机数占随机数和的百分比，相当于每个人拿到的钱占总分配钱（如上例的8角）的百分比。所以，数组的每个随机数，除以随机数和，再乘以可分配数额，再四舍五入到分（因为最小单位为分）。最后加上最初每人固定的1分钱。